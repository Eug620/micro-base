import{i as e}from"./index.70560215.js";/* empty css              *//* empty css              */import{R as a}from"./videojs-player-vue.7a581784.js";/* empty css              */import{d as t,Z as s,e as o,_ as i,$ as l,o as n,c as r,l as u,n as c,g as p,r as d,ad as m,ae as g,q as y,b as v,a2 as k,k as f,F as h,u as b,s as j,f as x,af as w,ag as z,ah as N,a as S,a4 as $}from"./acro-design.13ce7b6b.js";import"./lowdb.c138e033.js";import"./lodash.4de99ee7.js";import"./videoJs.f14acf20.js";const M=t({name:"IconPlayCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const a=s("icon");return{cls:o((()=>[a,`${a}-play-circle`,{[`${a}-spin`]:e.spin}])),sizeStyle:o((()=>{if(e.size)return{fontSize:i(e.size)?`${e.size}px`:e.size}}))}}}),B=["stroke-width","stroke-linecap","stroke-linejoin"],P=[p("path",{d:"M24 42c9.941 0 18-8.059 18-18S33.941 6 24 6 6 14.059 6 24s8.059 18 18 18Z"},null,-1),p("path",{d:"M19 17v14l12-7-12-7Z"},null,-1)];var R=l(M,[["render",function(e,a,t,s,o,i){return n(),r("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:u(e.cls),style:c(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},P,14,B)}]]);const C=Object.assign(R,{install:(e,a)=>{var t;const s=null!=(t=null==a?void 0:a.iconPrefix)?t:"";e.component(s+R.name,R)}});const _=t({emits:["videoPlay"],setup(e,{emit:a}){const t=d({columns:[{title:"文件名",slotName:"name"},{title:"大小",slotName:"size"},{title:"操作",slotName:"actions"}],data:[]});function s(e){if(e){var a="",t=(a=e<102.4?e.toFixed(2)+"B":e<104857.6?(e/1024).toFixed(2)+"KB":e<107374182.4?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB")+"",s=t.indexOf(".");return"00"==t.substr(s+1,2)?t.substring(0,s)+t.substr(s+3,2):a}}fetch("https://eug.asia/egg/api/minio/bucket/all").then((async e=>{let a=await e.json();t.data=a.data.map(((e,a)=>(e.key=a,e)))}));const o=(e,a)=>{fetch(`https://eug.asia/egg/api/minio/bucket/${e.name}`).then((async t=>{let s=await t.json();a(s.data.map(((a,t)=>(a.key=`${e.key}-${t}`,a.parentName=e.name,a.isLeaf=!0,a))))}))};return(e,i)=>{const l=m,u=g;return n(),y(u,{scroll:{x:"100%",y:"100%"},bordered:!1,pagination:!1,columns:b(t).columns,data:b(t).data,"load-more":o},{name:v((({record:e})=>[e.parentName?(n(),y(l,{key:0,href:e.parentName?`https://eug.asia/minio/${e.parentName}/${e.name}`:null},{default:v((()=>[k(f(e.name),1)])),_:2},1032,["href"])):(n(),r(h,{key:1},[k(f(e.name),1)],64))])),size:v((({record:e})=>[k(f(s(e.size)),1)])),actions:v((({record:e})=>[e.parentName&&e.name.endsWith(".mp4")?(n(),y(b(C),{key:0,size:24,class:"cursor-pointer",onClick:t=>(e=>{a("videoPlay",`https://eug.asia/minio/${e.parentName}/${e.name}`)})(e)},null,8,["onClick"])):j("",!0)])),_:1},8,["columns","data"])}}});const F=k("Details"),L=k(" Minio "),V=t({setup(e){const t=x("https://eug.asia/minio/videos/文豪野犬四-01.mp4"),s=()=>{i.src=t.value},o=(e="https://eug.asia/minio/videos/文豪野犬四-01.mp4")=>{i.src=e,t.value=e},i=d({src:t.value,poster:"https://eug.asia/minio/images/ac4c5ed6-53eb-457c-8350-aef04814335c.jpg",volume:.2,playbackRate:1,language:"zh-CN",notSupportedMessage:"此视频暂无法播放，请稍后再试",playbackRates:[.5,1,1.5,2,2.5,3]}),l=x(!1),r=()=>{l.value=!0};return(e,u)=>{const c=w,p=z,d=N,m=$;return n(),y(m,{bordered:!1,class:"base-player",id:"BasePlayer"},{title:v((()=>[S(c,{class:"!w-1/3",placeholder:"请输入视频地址",modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=e=>t.value=e),modelModifiers:{trim:!0},"allow-clear":"",onPressEnter:s},null,8,["modelValue"])])),extra:v((()=>[S(p,{type:"outline",onClick:r,status:"normal",shape:"round"},{default:v((()=>[F])),_:1})])),default:v((()=>[S(b(a),{src:b(i).src,poster:b(i).poster,preload:"auto",loop:"",controls:"",liveui:"",muted:"",autoplay:"",playsinline:"",volume:b(i).volume,playbackRate:b(i).playbackRate,language:b(i).language,notSupportedMessage:b(i).notSupportedMessage,playbackRates:b(i).playbackRates,style:{width:"100%",height:"calc(100% - 46px)"}},null,8,["src","poster","volume","playbackRate","language","notSupportedMessage","playbackRates"]),S(d,{"drawer-style":{zIndex:1},footer:null,"popup-container":"#BasePlayer",width:"100%",onOk:u[1]||(u[1]=e=>l.value=!1),onCancel:u[2]||(u[2]=e=>l.value=!1),visible:l.value},{title:v((()=>[L])),default:v((()=>[S(_,{onVideoPlay:o})])),_:1},8,["visible"])])),_:1})}}}),O=t({setup:e=>(e,a)=>(n(),y(V,{class:"h-full ml-2.5 relative"}))});export{O as default};
