import{I as e,i as t}from"./index.a9b8b7a6.js";/* empty css              *//* empty css              *//* empty css               *//* empty css              */import{R as s}from"./videojs-player-vue.9589d79b.js";import{d as i,Z as n,e as a,_ as o,$ as r,o as l,c,l as u,n as p,g as d,r as m,ad as k,ae as v,q as y,b as f,a2 as g,k as h,F as b,u as w,s as z,af as x,f as j,ag as S,ah as N,ai as $,aj as C,ak as L,a as M,al as P,a4 as B}from"./acro-design.4e45f86b.js";import"./lowdb.c138e033.js";import"./lodash.4de99ee7.js";import"./videoJs.f14acf20.js";const I=i({name:"IconInfoCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const t=n("icon");return{cls:a((()=>[t,`${t}-info-circle`,{[`${t}-spin`]:e.spin}])),sizeStyle:a((()=>{if(e.size)return{fontSize:o(e.size)?`${e.size}px`:e.size}}))}}}),W=["stroke-width","stroke-linecap","stroke-linejoin"],V=[d("path",{d:"M24 20v14m0-16v-4m18 10c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6s18 8.059 18 18Z"},null,-1)];var O=r(I,[["render",function(e,t,s,i,n,a){return l(),c("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:u(e.cls),style:p(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},V,14,W)}]]);const R=Object.assign(O,{install:(e,t)=>{var s;const i=null!=(s=null==t?void 0:t.iconPrefix)?s:"";e.component(i+O.name,O)}}),_=i({name:"IconDownload",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const t=n("icon");return{cls:a((()=>[t,`${t}-download`,{[`${t}-spin`]:e.spin}])),sizeStyle:a((()=>{if(e.size)return{fontSize:o(e.size)?`${e.size}px`:e.size}}))}}}),Z=["stroke-width","stroke-linecap","stroke-linejoin"],q=[d("path",{d:"m33.072 22.071-9.07 9.071-9.072-9.07M24 5v26m16 4v6H8v-6"},null,-1)];var F=r(_,[["render",function(e,t,s,i,n,a){return l(),c("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:u(e.cls),style:p(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},q,14,Z)}]]);const D=Object.assign(F,{install:(e,t)=>{var s;const i=null!=(s=null==t?void 0:t.iconPrefix)?s:"";e.component(i+F.name,F)}}),A=i({name:"IconMusic",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const t=n("icon");return{cls:a((()=>[t,`${t}-music`,{[`${t}-spin`]:e.spin}])),sizeStyle:a((()=>{if(e.size)return{fontSize:o(e.size)?`${e.size}px`:e.size}}))}}}),E=["stroke-width","stroke-linecap","stroke-linejoin"],G=[d("path",{d:"M15 37a4 4 0 1 0-8 0 4 4 0 0 0 8 0Zm0 0V18.5M41 37a4 4 0 1 0-8 0 4 4 0 0 0 8 0Zm0 0V16.5m-26 2V9.926a1 1 0 0 1 .923-.997l24-1.846A1 1 0 0 1 41 8.08v8.42m-26 2 26-2"},null,-1)];var H=r(A,[["render",function(e,t,s,i,n,a){return l(),c("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:u(e.cls),style:p(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},G,14,E)}]]);const J=Object.assign(H,{install:(e,t)=>{var s;const i=null!=(s=null==t?void 0:t.iconPrefix)?s:"";e.component(i+H.name,H)}}),K=i({name:"IconPlayCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const t=n("icon");return{cls:a((()=>[t,`${t}-play-circle`,{[`${t}-spin`]:e.spin}])),sizeStyle:a((()=>{if(e.size)return{fontSize:o(e.size)?`${e.size}px`:e.size}}))}}}),U=["stroke-width","stroke-linecap","stroke-linejoin"],Q=[d("path",{d:"M24 42c9.941 0 18-8.059 18-18S33.941 6 24 6 6 14.059 6 24s8.059 18 18 18Z"},null,-1),d("path",{d:"M19 17v14l12-7-12-7Z"},null,-1)];var T=r(K,[["render",function(e,t,s,i,n,a){return l(),c("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:u(e.cls),style:p(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},Q,14,U)}]]);const X=Object.assign(T,{install:(e,t)=>{var s;const i=null!=(s=null==t?void 0:t.iconPrefix)?s:"";e.component(i+T.name,T)}}),Y=i({name:"IconBook",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const t=n("icon");return{cls:a((()=>[t,`${t}-book`,{[`${t}-spin`]:e.spin}])),sizeStyle:a((()=>{if(e.size)return{fontSize:o(e.size)?`${e.size}px`:e.size}}))}}}),ee=["stroke-width","stroke-linecap","stroke-linejoin"],te=[d("path",{d:"M24 13 7 7v28l17 6 17-6V7l-17 6Zm0 0v27.5M29 18l7-2.5M29 25l7-2.5M29 32l7-2.5M19 18l-7-2.5m7 9.5-7-2.5m7 9.5-7-2.5"},null,-1)];var se=r(Y,[["render",function(e,t,s,i,n,a){return l(),c("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:u(e.cls),style:p(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},te,14,ee)}]]);const ie=Object.assign(se,{install:(e,t)=>{var s;const i=null!=(s=null==t?void 0:t.iconPrefix)?s:"";e.component(i+se.name,se)}});const ne=i({emits:["videoPlay","bookPreview"],setup(e,{emit:t}){const s=m({columns:[{title:"文件名",slotName:"name",sortable:{sortDirections:["ascend","descend"]}},{title:"大小",slotName:"size"},{title:"操作",slotName:"actions"}],data:[]}),i=(e,s)=>{t(s,{url:`https://eug.asia/minio/${e.parentName}/${e.name}`,path:e.parentName,fileName:e.name})};function n(e){if(e){var t="",s=(t=e<102.4?e.toFixed(2)+"B":e<104857.6?(e/1024).toFixed(2)+"KB":e<107374182.4?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB")+"",i=s.indexOf(".");return"00"==s.substr(i+1,2)?s.substring(0,i)+s.substr(i+3,2):t}}fetch("https://eug.asia/egg/api/minio/bucket/all").then((async e=>{let t=await e.json();s.data=t.data.map(((e,t)=>(e.key=t,e)))}));const a=(e,t)=>{fetch(`https://eug.asia/egg/api/minio/bucket/${e.name}`).then((async s=>{let i=await s.json();t(i.data.map(((t,s)=>(t.key=`${e.key}-${s}`,t.parentName=e.name,t.isLeaf=!0,t))))}))};return(e,t)=>{const o=k,r=v;return l(),y(r,{scroll:{x:"100%",y:"100%"},bordered:!1,pagination:!1,columns:w(s).columns,data:w(s).data,"load-more":a},{name:f((({record:e})=>[e.parentName?(l(),y(o,{key:0,href:e.parentName?`https://eug.asia/minio/${e.parentName}/${e.name}`:null},{default:f((()=>[g(h(e.name),1)])),_:2},1032,["href"])):(l(),c(b,{key:1},[g(h(e.name),1)],64))])),size:f((({record:e})=>[g(h(n(e.size)),1)])),actions:f((({record:e})=>[e.parentName&&"videos"===e.parentName?(l(),y(w(X),{key:0,size:24,class:"cursor-pointer",onClick:t=>i(e,"videoPlay")},null,8,["onClick"])):z("",!0),e.parentName&&"books"===e.parentName?(l(),y(w(ie),{key:1,size:24,class:"cursor-pointer",onClick:t=>i(e,"bookPreview")},null,8,["onClick"])):z("",!0),e.parentName&&"images"===e.parentName?(l(),y(w(x),{key:2,size:24,class:"cursor-pointer",onClick:t=>i(e,"imagesPreview")},null,8,["onClick"])):z("",!0),e.parentName&&"music"===e.parentName?(l(),y(w(J),{key:3,size:24,class:"cursor-pointer",onClick:t=>i(e,"musicPreview")},null,8,["onClick"])):z("",!0)])),_:1},8,["columns","data"])}}});const ae={key:1},oe={key:2},re={key:0,src:"/assets/zw.c8d9077e.svg",alt:"",style:{width:"100%",height:"calc(100% - 46px)"}},le=["src"],ce={class:"mx-2 cursor-pointer"},ue=["src"],pe=g(" Minio "),de=i({setup(t){const i=j(""),n=()=>{V.src=i.value},o=m({video:!1,pdf:!1,image:!1,music:!1}),r=a((()=>-1!=Object.keys(o).findIndex((e=>o[e])))),u=({video:e,pdf:t,image:s,music:i})=>{o.pdf=t,o.video=e,o.image=s,o.music=i},p=({url:e})=>{V.src=e,i.value=e,u({video:!0})},k=m({}),v=({url:e,path:t,fileName:s})=>{k.fileName=s,k.path=t,k.url=e},g=e=>{v(e),u({pdf:!0})},b=j(!1),x=e=>{v(e),u({image:!0})},I=()=>{},W=e=>{v(e),u({music:!0})},V=m({src:i.value,poster:"https://eug.asia/minio/images/ac4c5ed6-53eb-457c-8350-aef04814335c.jpg",volume:.2,playbackRate:1,language:"zh-CN",notSupportedMessage:"此视频暂无法播放，请稍后再试",playbackRates:[.5,1,1.5,2,2.5,3]}),O=j(!1),_=()=>{O.value=!0};return(t,a)=>{const u=S,m=N,v=$,j=C,Z=L,q=B;return l(),y(q,{bordered:!1,class:"base-player",id:"BasePlayer"},{title:f((()=>[w(o).video?(l(),y(u,{key:0,class:"!w-1/3",placeholder:"请输入视频地址",modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),modelModifiers:{trim:!0},"allow-clear":"",onPressEnter:n},null,8,["modelValue"])):z("",!0),w(o).pdf||w(o).image||w(o).music?(l(),c("div",ae,h(w(k).fileName),1)):z("",!0),w(r)?z("",!0):(l(),c("div",oe,"一不小心空白啦~"))])),extra:f((()=>[M(m,{type:"outline",onClick:_,status:"normal",shape:"round"},{icon:f((()=>[M(w(e))])),_:1})])),default:f((()=>[w(r)?z("",!0):(l(),c("img",re)),w(o).video?(l(),y(w(s),{key:1,src:w(V).src,poster:w(V).poster,preload:"auto",loop:"",controls:"",liveui:"",muted:"",autoplay:"",playsinline:"",volume:w(V).volume,playbackRate:w(V).playbackRate,language:w(V).language,notSupportedMessage:w(V).notSupportedMessage,playbackRates:w(V).playbackRates,style:{width:"100%",height:"calc(100% - 46px)"}},null,8,["src","poster","volume","playbackRate","language","notSupportedMessage","playbackRates"])):z("",!0),w(o).pdf?(l(),c("iframe",{key:2,src:w(k).url,style:{width:"100%",height:"calc(100% - 46px)"}},null,8,le)):z("",!0),w(o).image?(l(),y(j,{key:3,"show-loader":"",src:w(k).url,title:w(k).path,description:w(k).fileName,style:{width:"100%",height:"calc(100% - 46px)"},"preview-visible":b.value,onPreviewVisibleChange:a[2]||(a[2]=()=>{b.value=!1})},{extra:f((()=>[d("div",null,[d("span",{class:"mx-2 cursor-pointer",onClick:a[1]||(a[1]=()=>{b.value=!0})},[M(w(P),{size:"26"})]),d("span",{class:"mx-2 cursor-pointer",onClick:I},[M(w(D),{size:"26"})]),M(v,{content:w(k).path},{default:f((()=>[d("span",ce,[M(w(R),{size:"26"})])])),_:1},8,["content"])])])),_:1},8,["src","title","description","preview-visible"])):z("",!0),w(o).music?(l(),c("audio",{key:4,class:"inset-x-1/2 -translate-x-2/4 -translate-y-2/4 inset-y-1/2 absolute",autoplay:"",loop:"",src:w(k).url,controls:""},null,8,ue)):z("",!0),M(Z,{"drawer-style":{zIndex:1},footer:null,"popup-container":"#BasePlayer",width:"100%",onOk:a[3]||(a[3]=e=>O.value=!1),onCancel:a[4]||(a[4]=e=>O.value=!1),visible:O.value},{title:f((()=>[pe])),default:f((()=>[M(ne,{onVideoPlay:p,onBookPreview:g,onImagesPreview:x,onMusicPreview:W})])),_:1},8,["visible"])])),_:1})}}}),me=i({setup:e=>(e,t)=>(l(),y(de,{class:"h-full ml-2.5 relative"}))});export{me as default};
