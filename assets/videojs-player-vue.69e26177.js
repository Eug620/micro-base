import{v as e}from"./videoJs.f14acf20.js";import{d as n,H as t,I as r,e as o,f as a,J as i,x as u,B as c,K as s,L as l,l as p}from"./acro-design.e5e7160c.js";function g(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}var d={src:{type:String,onChange:function(e,n){return e.src(n)}},width:{type:Number,onChange:function(e,n){return e.width(n)},onEvent:function(e,n){e.on(["playerresize","resize"],(function(){return n(e.width())}))}},height:{type:Number,onChange:function(e,n){return e.height(n)},onEvent:function(e,n){e.on(["playerresize","resize"],(function(){return n(e.height())}))}},preload:{type:String,onChange:function(e,n){return e.preload(n)}},loop:{type:Boolean,onChange:function(e,n){return e.loop(n)}},muted:{type:Boolean,onChange:function(e,n){return e.muted(n)},onEvent:function(e,n){return e.on("volumechange",(function(){return n(e.muted())}))}},poster:{type:String,onChange:function(e,n){return e.poster(n)},onEvent:function(e,n){return e.on("posterchange",(function(){return n(e.poster())}))}},controls:{type:Boolean,onChange:function(e,n){return e.controls(n)},onEvent:function(e,n){e.on("controlsenabled",(function(){return n(!0)})),e.on("controlsdisabled",(function(){return n(!1)}))}},autoplay:{type:[Boolean,String],onChange:function(e,n){return e.autoplay(n)}},crossorigin:{type:String,onChange:function(e,n){return e.crossOrigin(n)}},crossOrigin:{type:String,onChange:function(e,n){return e.crossOrigin(n)}},playsinline:{type:Boolean,onChange:function(e,n){return e.playsinline(n)}},playsInline:{type:Boolean,onChange:function(e,n){return e.playsinline(n)}}},f={id:{type:String},sources:{type:Array,onChange:function(e,n){return e.src(n)}},tracks:{type:Array,onChange:function(e,n){for(var t=e.remoteTextTracks(),r=(null==t?void 0:t.length)||0;r--;)e.removeRemoteTextTrack(t[r]);e.ready((function(){n.forEach((function(n){return e.addRemoteTextTrack(n,!1)}))}))}},textTrackSettings:{type:Object,onChange:function(e,n){return e.textTrackSettings.options(n)}},language:{type:String,onChange:function(e,n){return e.language(n)},onEvent:function(e,n){return e.on("languagechange",(function(){return n(e.language())}))}},languages:{type:Object},playbackRates:{type:Array,onChange:function(e,n){return e.playbackRates(null!=n?n:[])},onEvent:function(e,n){e.on("playbackrateschange",(function(){return n(e.playbackRates())}))}},audioOnlyMode:{type:Boolean,onChange:function(e,n){return e.audioOnlyMode(n)}},audioPosterMode:{type:Boolean,onChange:function(e,n){return e.audioPosterMode(n)}},responsive:{type:Boolean,onChange:function(e,n){return e.responsive(n)}},breakpoints:{type:Object,onChange:function(e,n){return e.breakpoints(n)}},fluid:{type:Boolean,onChange:function(e,n){return e.fluid(n)}},fill:{type:Boolean,onChange:function(e,n){return e.fill(n)}},aspectRatio:{type:String,onChange:function(e,n){return e.aspectRatio(n)}},fullscreen:{type:Object},liveui:{type:Boolean},liveTracker:{type:Object},disablePictureInPicture:{type:Boolean,onChange:function(e,n){return e.disablePictureInPicture(n)}},notSupportedMessage:{type:String},normalizeAutoplay:{type:Boolean},noUITitleAttributes:{type:Boolean},preferFullWindow:{type:Boolean},suppressNotSupportedError:{type:Boolean},techCanOverridePoster:{type:Boolean},reportTouchActivity:{type:Boolean},techOrder:{type:Array},inactivityTimeout:{type:Number},userActions:{type:Object},plugins:{type:Object},restoreEl:{type:[Boolean,Object]},"vtt.js":{type:String}},v={children:{type:[Array,Object]},controlBar:{type:Object,onChange:function(e,n){return e.controlBar.options(n)}}},y={html5:{type:Object}},h={volume:{type:Number,onChange:function(e,n){return e.volume(n)},onEvent:function(e,n){return e.on("volumechange",(function(){return n(e.volume())}))}},playbackRate:{type:Number,onChange:function(e,n){e.playbackRate(n),e.defaultPlaybackRate(n)},onEvent:function(e,n){e.on("ratechange",(function(){n(e.playbackRate())}))}},options:{type:Object}},b=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},d),f),v),y),h),m=Object.keys(b),O=Object.assign(Object.assign(Object.assign(Object.assign({},{loadstart:"onLoadStart",suspend:"onSuspend",abort:"onAbort",error:"onError",emptied:"onEmptied",stalled:"onStalled",loadedmetadata:"onLoadedMetadata",loadeddata:"onLoadedData",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",playing:"onPlaying",waiting:"onWaiting",seeking:"onSeeking",seeked:"onSeeked",ended:"onEnded",durationchange:"onDurationChange",timeupdate:"onTimeUpdate",progress:"onProgress",play:"onPlay",pause:"onpause",ratechange:"onRateChange",resize:"onResize",volumechange:"onVolumeChange"}),{posterchange:"onPosterChange",languagechange:"onLanguageChange",fullscreenchange:"onFullscreenChange",playbackrateschange:"onPlaybackRatesChange",controlsdisabled:"onControlsDisabled",controlsenabled:"onControlsEnabled",enterFullWindow:"onEnterFullWindow",exitFullWindow:"onExitFullWindow",enterpictureinpicture:"onEnterPictureInPicture",leavepictureinpicture:"onLeavePictureInPicture",sourceset:"onSourceSet",texttrackchange:"onTextTrackChange",textdata:"onTextData",useractive:"onUserActive",userinactive:"onUserInactive",usingcustomcontrols:"onUsingCustomControls",usingnativecontrols:"onUsingNativeControls",dispose:"onDispose"}),{beforepluginsetup:"onBeforePluginSetup",pluginsetup:"onPluginSetup"}),{componentresize:"onComponentResize",playerresize:"onPlayerResize",ready:"onReady",tap:"onTap"}),k=Object.keys(O);Object.values(O);var C=function(e){var n,t=null==e?void 0:e.trim().replace(/\s+/g," ");return t&&null!==(n=t.split(" "))&&void 0!==n?n:[]},j={src:{getter:function(e){return e.src()}},currentSrc:{getter:function(e){return e.currentSrc()}},currentSource:{getter:function(e){return e.currentSource()}},width:{events:["resize","playerresize"],getter:function(e){return e.width()}},height:{events:["resize","playerresize"],getter:function(e){return e.height()}},currentWidth:{events:["resize","playerresize"],getter:function(e){return e.currentWidth()}},currentHeight:{events:["resize","playerresize"],getter:function(e){return e.currentHeight()}},videoWidth:{events:["resize","playerresize"],getter:function(e){return e.videoWidth()}},videoHeight:{events:["resize","playerresize"],getter:function(e){return e.videoHeight()}},controls:{events:["controlsdisabled","controlsenabled"],getter:function(e){return e.controls()}},volume:{events:["volumechange"],getter:function(e){return e.volume()}},muted:{events:["volumechange"],getter:function(e){return e.muted()}},poster:{events:["posterchange"],getter:function(e){return e.poster()}},seeking:{events:["seeking"],getter:function(e){return e.seeking()}},paused:{events:["pause","play","playing"],getter:function(e){return e.paused()}},ended:{events:["ended","play"],getter:function(e){return e.ended()}},currentTime:{events:["timeupdate"],getter:function(e){return e.currentTime()}},duration:{events:["durationchange"],getter:function(e){return e.duration()}},playbackRate:{events:["ratechange"],getter:function(e){return e.playbackRate()}},playbackRates:{events:["playbackrateschange"],getter:function(e){return e.playbackRates()}},isFullscreen:{events:["fullscreenchange"],getter:function(e){return e.isFullscreen()}},isInPictureInPicture:{events:["enterpictureinpicture","leavepictureinpicture"],getter:function(e){return e.isInPictureInPicture()}},isLive:{getter:function(e){var n;return null===(n=e.liveTracker)||void 0===n?void 0:n.isLive()}},language:{events:["languagechange"],getter:function(e){return e.language()}},userActive:{events:["useractive","userinactive"],getter:function(e){return e.userActive()}},readyState:{events:["loadeddata"],getter:function(e){return e.readyState()}},networkState:{events:["loadeddata","error"],getter:function(e){return e.networkState()}},error:{events:["loadeddata","error"],getter:function(e){return e.error()}},buffered:{events:["progress"],getter:function(e){return e.buffered()}},bufferedPercent:{events:["progress"],getter:function(e){return e.bufferedPercent()}},played:{events:["timeupdate"],getter:function(e){return e.played()}},seekable:{events:["progress","seeked"],getter:function(e){return e.seekable()}},audioTracks:{getter:function(e){var n;return null===(n=e.audioTracks)||void 0===n?void 0:n.call(e)}},videoTracks:{getter:function(e){var n;return null===(n=e.videoTracks)||void 0===n?void 0:n.call(e)}},textTracks:{getter:function(e){var n;return null===(n=e.textTracks)||void 0===n?void 0:n.call(e)}}},P=m.filter((function(e){return Boolean(b[e].onEvent)})),S=function(e){return"update:"+e},E=k.concat(P.map(S)),T=m.reduce((function(e,n){var t,r=b[n],o=Array.isArray(r.type)?r.type:[r.type],a=Object.assign({},r);return o.includes(Boolean)&&(a.default=void 0),Object.assign(Object.assign({},e),((t={})[n]=a,t))}),{}),B=n({name:"VueVideoPlayer",props:Object.assign(Object.assign({},T),{class:[String,Object,Array]}),emits:E.concat(["mounted"],["unmounted"]),setup:function(n,d){var f=t(n),v=f.class,y=g(f,["class"]),h=r(!1),O=r(null),E=r(null),T=o((function(){return E.value?E.value.player:null})),B=a(null),R=o((function(){return B.value?i(B.value):null}));return u((function(){var t,r,o,a,i,u,s=function(n){var t,r=n.props,o=n.element,a=n.className,i=n.onEvent,u=r.options;void 0===u&&(u={});var c=g(r,["options"]),s={};Object.keys(c).forEach((function(e){var n=c[e];void 0!==n&&(s[e]=n)}));var l=Object.assign(Object.assign({},s),u),p=l.volume,d=l.playbackRate,f=g(l,["volume","playbackRate"]),v=Object.assign(Object.assign({},f),{playsinline:null!==(t=f.playsinline)&&void 0!==t?t:f.playsInline}),y=e(o,v,(function(){var e=this;k.forEach((function(n){e.on(n,(function(e){i(n,e)}))})),f.src&&!f.sources&&this.src(f.src),p&&Number.isFinite(p)&&this.volume(p),d&&Number.isFinite(d)&&(this.defaultPlaybackRate(d),setTimeout((function(){e.playbackRate(d)}),0))}));a&&C(a).map((function(e){return y.addClass(e)}));var h=function(e){var n;null===(n=y.options)||void 0===n||n.call(y,null!=e?e:{})};return{player:y,dispose:function(){return y.dispose()},updateClassNames:function(e,n){C(e).map((function(e){return y.removeClass(e)})),C(n).map((function(e){return y.addClass(e)}))},updateOptions:h,updatePropOption:function(e,n){var t,r,o;h(((t={})[e]=n,t)),null===(o=null===(r=b[e])||void 0===r?void 0:r.onChange)||void 0===o||o.call(r,y,n)}}}({element:O.value,props:y,onEvent:d.emit});t={player:s.player,onEvent:d.emit},P.forEach((function(e){var n,r;null===(r=null===(n=b[e])||void 0===n?void 0:n.onEvent)||void 0===r||r.call(n,t.player,(function(n){t.onEvent(S(e),n)}))})),c((function(){return n.class}),(function(e,n){var t=p(n),r=p(e);s.updateClassNames(t,r)}),{immediate:!0}),c((function(){return n.options}),(function(e){return s.updateOptions(null!=e?e:{})}),{deep:!0}),m.filter((function(e){return"options"!==e})).forEach((function(e){c((function(){return n[e]}),(function(n){return s.updatePropOption(e,n)}),{deep:!0})})),r=s.player,o={onInit:function(e){B.value=e},onUpdate:function(e,n){B.value&&(B.value[e]=n)}},a=Object.keys(j),i=a.reduce((function(e,n){var t;return Object.assign(Object.assign({},e),((t={})[n]=j[n].getter(r),t))}),{playing:!1,waiting:!1}),u=function(e,n){i[e]=n,o.onUpdate(e,n,Object.assign({},i))},r.on(["pause","ended"],(function(){u("playing",!1)})),r.on(["play","playing"],(function(){u("playing",!0)})),r.on("waiting",(function(){u("waiting",!0);var e=r.currentTime(),n=function(){e!==r.currentTime()&&(u("waiting",!1),r.off("timeupdate",n))};r.on("timeupdate",n)})),a.forEach((function(e){var n,t=j[e];r.on(["loadstart","loadedmetadata"].concat(null!==(n=t.events)&&void 0!==n?n:[]),(function(){u(e,t.getter(r))}))})),o.onInit(Object.assign({},i)),E.value=s,h.value=!0,d.emit("mounted",{video:O.value,player:T.value,state:R.value})})),s((function(){E.value&&(E.value.dispose(),E.value=null,B.value=null,d.emit("unmounted"))})),function(){var e,n;return l("div",{"data-vjs-player":"",class:p(v)},[l("video",{class:["video-js","v-video-player"],ref:O}),h.value&&(null===(n=(e=d.slots).default)||void 0===n?void 0:n.call(e,{video:O.value,player:T.value,state:R.value}))])}}});export{B as R};
